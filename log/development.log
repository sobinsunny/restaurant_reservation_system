  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGuests (20180125110326)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110326"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateRestaurants (20180125110835)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110835"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-25 11:37:43.161326"], ["updated_at", "2018-01-25 11:37:43.161326"]]
  [1m[35m (4.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Exists (19.3ms)[0m  [1m[34mSELECT  1 AS one FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (7.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateReservations (20180125120543)
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_datetime" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_a00daaa2d3"
FOREIGN KEY ("guest_id")
  REFERENCES "guests" ("id")
, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125120543"]]
  [1m[35m (21.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTables (20180125122518)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "num_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125122518"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateTables (20180125122518)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (29.4ms)[0m  [1m[35mDROP TABLE "tables"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20180125122518"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateReservations (20180125120543)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.7ms)[0m  [1m[35mDROP TABLE "reservations"[0m
  [1m[35mSQL (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20180125120543"]]
  [1m[35m (5.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateReservations (20180125120543)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_a00daaa2d3"
FOREIGN KEY ("guest_id")
  REFERENCES "guests" ("id")
, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125120543"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTables (20180125122518)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125122518"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
Started POST "/restaurants" for 127.0.0.1 at 2018-01-25 18:18:37 +0530
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#create as */*
  Parameters: {"user"=>{"name"=>"soibin"}, "restaurant"=>{}}
Completed 204 No Content in 0ms (ActiveRecord: 0.6ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-25 18:19:23 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"user"=>{"name"=>"soibin"}, "restaurant"=>{}}
Completed 204 No Content in 0ms (ActiveRecord: 0.0ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "restaurants"[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Malabar"], ["email", "sobi@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-25 12:51:22.429087"], ["updated_at", "2018-01-25 12:51:22.429087"]]
  [1m[35m (2.1ms)[0m  [1m[36mcommit transaction[0m
Started POST "/restaurants" for 127.0.0.1 at 2018-01-25 18:21:33 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"user"=>{"name"=>"soibin"}, "restaurant"=>{}}
Completed 204 No Content in 1ms (ActiveRecord: 0.0ms)


  [1m[36mRestaurant Load (26.9ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" LIMIT ?[0m  [["LIMIT", 11]]
Started POST "/restaurants" for 127.0.0.1 at 2018-01-25 19:26:43 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"user"=>{"name"=>"soibin"}, "restaurant"=>{}}
Completed 204 No Content in 1ms (ActiveRecord: 1.5ms)


Started GET "/restaurants" for 127.0.0.1 at 2018-01-25 19:26:51 +0530
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)


  
NameError (uninitialized constant RestaurantsController::Restrurant):
  
app/controllers/restaurants_controller.rb:4:in `index'
Started GET "/restaurants" for 127.0.0.1 at 2018-01-25 19:27:20 +0530
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (14.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
Completed 200 OK in 30ms (Views: 14.6ms | ActiveRecord: 15.6ms)


  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) LIMIT ?[0m  [["requested_date_time", "2018-01-22 00:00:00"], ["requested_date_time", "2018-01-22 01:00:00"], ["LIMIT", 11]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 1], ["number_of_seats", 2], ["restaurant_id", 1], ["created_at", "2018-01-25 16:21:08.348038"], ["updated_at", "2018-01-25 16:21:08.348038"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 2], ["number_of_seats", 4], ["restaurant_id", 1], ["created_at", "2018-01-25 16:21:58.694926"], ["updated_at", "2018-01-25 16:21:58.694926"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "ss@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "guests" ("email", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "ss@gmail.com"], ["name", "sobisunnny@gmail.com"], ["created_at", "2018-01-25 16:36:31.318361"], ["updated_at", "2018-01-25 16:36:31.318361"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" ORDER BY "guests"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.7ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 1], ["guest_party_size", 1], ["requested_date_time", "2018-01-25 16:35:29.655978"], ["created_at", "2018-01-25 16:37:04.293356"], ["updated_at", "2018-01-25 16:37:04.293356"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) LIMIT ?[0m  [["requested_date_time", "2018-01-22 00:00:00"], ["requested_date_time", "2018-01-22 01:00:00"], ["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."id" = ? LIMIT ?[0m  [["requested_date_time", "2018-01-22 00:00:00"], ["requested_date_time", "2018-01-22 01:00:00"], ["id", 0], ["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."id" = ? LIMIT ?[0m  [["requested_date_time", "2018-01-25 15:40:24.335669"], ["requested_date_time", "2018-01-25 17:40:24.336041"], ["id", 0], ["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) LIMIT ?[0m  [["requested_date_time", "2018-01-25 15:40:24.335669"], ["requested_date_time", "2018-01-25 17:40:24.336041"], ["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) LIMIT ?[0m  [["requested_date_time", "2018-01-25 15:40:24.335669"], ["requested_date_time", "2018-01-25 17:40:24.336041"], ["LIMIT", 11]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" LEFT OUTER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "reservations"."id" = ? LIMIT ?[0m  [["requested_date_time", "2018-01-25 15:40:24.335669"], ["requested_date_time", "2018-01-25 17:40:24.336041"], ["id", 0], ["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (id not in 1,3) LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (id not in(1,3)) LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" ORDER BY "tables"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1 LIMIT ?[0m  [["requested_date_time", "2018-01-25 15:40:24.335669"], ["requested_date_time", "2018-01-25 17:40:24.336041"], ["LIMIT", 11]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" LIMIT ?[0m  [["LIMIT", 11]]
Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 22:59:11 +0530
  
ActionController::RoutingError (No route matches [GET] "/tables"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:00:45 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.9ms)


  
NameError (uninitialized constant ApplicationController::Resturant):
  
app/controllers/application_controller.rb:10:in `set_resturant'
Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:01:34 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
Completed 500 Internal Server Error in 158ms (ActiveRecord: 0.9ms)


  
NameError (undefined local variable or method `reservation_params' for #<TablesController:0x007fc16a171a78>
Did you mean?  reservations_create_path):
  
app/controllers/application_controller.rb:10:in `set_resturant'
Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:02:05 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (26.7ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.6ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = ?[0m  [["restaurant_id", 1]]
Completed 200 OK in 116ms (Views: 19.7ms | ActiveRecord: 29.3ms)


Started GET "/tables?restaurant_email=sobim@gmail.com" for 127.0.0.1 at 2018-01-25 23:02:13 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobim@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobim@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.2ms)


  
NoMethodError (undefined method `tables' for nil:NilClass):
  
app/controllers/tables_controller.rb:5:in `index'
Started GET "/tables?restaurant_email=sobim@gmail.com" for 127.0.0.1 at 2018-01-25 23:07:56 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobim@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobim@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."resturant" IS NULL[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 3.0ms)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: tables.resturant: SELECT "tables".* FROM "tables" WHERE "tables"."resturant" IS NULL):
  
app/controllers/tables_controller.rb:6:in `index'
Started GET "/tables?restaurant_email=sobim@gmail.com" for 127.0.0.1 at 2018-01-25 23:08:56 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobim@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobim@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 8ms (Views: 0.6ms | ActiveRecord: 2.0ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:03 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 14ms (Views: 0.7ms | ActiveRecord: 1.0ms)


Started GET "/tables?restaurant_email=sobin@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:12 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobin@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobin@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.7ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:31 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 13ms (Views: 0.6ms | ActiveRecord: 1.6ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:39 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 3ms (Views: 1.7ms | ActiveRecord: 0.4ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:39 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.6ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:09:40 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 0.5ms)


Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:10:13 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.6ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/controllers/tables_controller.rb:5:in `index'
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Started GET "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:11:45 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (19.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = 1[0m
Completed 200 OK in 40ms (Views: 8.7ms | ActiveRecord: 20.8ms)


Started GET "/tables?restaurant_email=sobni@gmail.com" for 127.0.0.1 at 2018-01-25 23:11:52 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobni@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.9ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobni@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.1ms)


Started GET "/tables?restaurant_email=sobin@gmail.com" for 127.0.0.1 at 2018-01-25 23:12:24 +0530
Processing by TablesController#index as */*
  Parameters: {"restaurant_email"=>"sobin@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobin@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" IS NULL[0m
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.6ms)


Started POST "/tables?restaurant_email=sobin@gmail.com&number=3&number_of_seats=4" for 127.0.0.1 at 2018-01-25 23:13:53 +0530
Processing by TablesController#create as */*
  Parameters: {"user"=>{"name"=>"soibin"}, "restaurant_email"=>"sobin@gmail.com", "number"=>"3", "number_of_seats"=>"4", "table"=>{}}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobin@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 1ms (ActiveRecord: 0.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: tables):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:14:48 +0530
Processing by TablesController#create as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 4ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: tables):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:15:00 +0530
Processing by TablesController#create as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 19ms (ActiveRecord: 1.1ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:15:57 +0530
Processing by TablesController#create as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 400 Bad Request in 1ms (ActiveRecord: 0.2ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:18:27 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
Completed 500 Internal Server Error in 90ms (ActiveRecord: 0.2ms)


  
NameError (undefined local variable or method `current_restaurant' for #<TablesController:0x007fc16acf8a18>
Did you mean?  @current_restaurant):
  
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:18:56 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 200 OK in 95ms (Views: 0.5ms | ActiveRecord: 2.0ms)


Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:19:32 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 200 OK in 21ms (Views: 0.3ms | ActiveRecord: 2.0ms)


Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:20:12 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (62.9ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 4], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-25 17:50:12.924764"], ["updated_at", "2018-01-25 17:50:12.924764"]]
  [1m[35m (55.1ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 146ms (Views: 0.3ms | ActiveRecord: 120.1ms)


Started POST "/tables" for 127.0.0.1 at 2018-01-25 23:20:26 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 4], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-25 17:50:26.305192"], ["updated_at", "2018-01-25 17:50:26.305192"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 34ms (Views: 0.8ms | ActiveRecord: 4.7ms)


Started POST "/tables?restaurant_email=sobisunny@gmail.com%7B%7B" for 127.0.0.1 at 2018-01-25 23:34:51 +0530
Processing by TablesController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com{{", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 400 Bad Request in 15ms (ActiveRecord: 1.3ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:35:07 +0530
Processing by TablesController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 400 Bad Request in 2ms (ActiveRecord: 0.4ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:17:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:35:53 +0530
  
ActionController::RoutingError (No route matches [POST] "/reservations"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:36:45 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (22.8ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 112ms (ActiveRecord: 24.0ms)


  
NameError (uninitialized constant ReservationsController::ReservationService):
  
app/controllers/reservations_controller.rb:9:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:41:01 +0530
  [1m[35m (22.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (89.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 449ms (ActiveRecord: 90.4ms)


  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/services/reservation_service.rb:9: syntax error, unexpected ','
 available_tables(restaurant:,guest_party_size:, requested_d
                              ^):
  
app/services/reservation_service.rb:9: syntax error, unexpected ','
app/controllers/reservations_controller.rb:9:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:43:05 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (11.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 35ms (ActiveRecord: 12.5ms)


  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/services/reservation_service.rb:9: syntax error, unexpected ','
 available_tables(restaurant:,guest_party_size:,requested_da
                              ^):
  
app/services/reservation_service.rb:9: syntax error, unexpected ','
app/controllers/reservations_controller.rb:9:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:44:57 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 14ms (ActiveRecord: 1.6ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:9:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:48:47 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.3ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/services/reservation_service.rb:7:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:49:20 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 12ms (ActiveRecord: 1.3ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/services/reservation_service.rb:7:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:54:13 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 109ms (ActiveRecord: 1.6ms)


  
NameError (undefined local variable or method `current_restaurant' for #<ReservationsController:0x007fa24304be50>
Did you mean?  @current_restaurant):
  
app/controllers/reservations_controller.rb:12:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:54:21 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.5ms)


  
NameError (undefined local variable or method `party_size' for ReservationService:Class):
  
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:54:58 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 25ms (ActiveRecord: 1.5ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobisunny@gmail.com" for 127.0.0.1 at 2018-01-25 23:55:37 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobisunny@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 21ms (ActiveRecord: 1.2ms)


  
NoMethodError (undefined method `id' for nil:NilClass):
  
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:56:15 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (2.6ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 92ms (ActiveRecord: 5.8ms)


  
NameError (undefined local variable or method `time_range' for ReservationService:Class):
  
app/services/reservation_service.rb:23:in `reserved_tables'
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:57:57 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.9ms)


  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/services/reservation_service.rb:20: syntax error, unexpected '.', expecting ')'
t_party_size, restaurant.id, .collect(&:id))
                              ^
/Users/sobin/Documents/my_projects/restaurant_reservation/app/services/reservation_service.rb:20: syntax error, unexpected ')', expecting keyword_end
restaurant.id, .collect(&:id))
                              ^
/Users/sobin/Documents/my_projects/restaurant_reservation/app/services/reservation_service.rb:27: syntax error, unexpected end-of-input, expecting keyword_end):
  
app/services/reservation_service.rb:20: syntax error, unexpected '.', expecting ')'
app/services/reservation_service.rb:20: syntax error, unexpected ')', expecting keyword_end
app/services/reservation_service.rb:27: syntax error, unexpected end-of-input, expecting keyword_end
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:58:28 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (20.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "26-1-2018"]]
Completed 500 Internal Server Error in 92ms (ActiveRecord: 23.4ms)


  
ActiveRecord::PreparedStatementInvalid (wrong number of bind variables (3 for 2) in: number_of_seats >= ? and restaurant_id and id not in(?)):
  
app/services/reservation_service.rb:20:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-25 23:58:52 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "26-1-2018"]]
  [1m[36mTable Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 90ms (ActiveRecord: 3.8ms)


  
NameError (uninitialized constant Exceptions):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:00:06 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "26-1-2018"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.5ms)


  
NameError (uninitialized constant Exceptions):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:00:26 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"26-1-2018"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "26-1-2018"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 45ms (ActiveRecord: 3.9ms)


  
ReservationService::ReservationAvailabityError (ReservationService::ReservationAvailabityError):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:01:25 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "25-1-2018 11.40 PM"]]
  [1m[36mTable Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.3ms)


  
ReservationService::ReservationAvailabityError (ReservationService::ReservationAvailabityError):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:01:59 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 44ms (ActiveRecord: 3.8ms)


  
NoMethodError (undefined method `pry' for #<Binding:0x007fa243a5f2c0>
Did you mean?  try):
  
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:02:11 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 25ms (ActiveRecord: 2.0ms)


  
NoMethodError (undefined method `pry' for #<Binding:0x007fa243677bf8>
Did you mean?  try):
  
app/services/reservation_service.rb:19:in `available_tables'
app/services/reservation_service.rb:8:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:02:27 +0530
  [1m[35m (18.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "25-1-2018 11.40 PM"]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE "reservations"."requested_date_time" = ? AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "25-1-2018 11.40 PM"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 117693ms (ActiveRecord: 4.2ms)


  
ReservationService::ReservationAvailabityError (ReservationService::ReservationAvailabityError):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:04:32 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "guests" ("email", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "sobisunny@gmail.com"], ["name", "sobin"], ["created_at", "2018-01-25 18:34:46.014263"], ["updated_at", "2018-01-25 18:34:46.014263"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 4038ms (ActiveRecord: 6.7ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'party_size' for Reservation.):
  
app/services/reservation_service.rb:11:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:05:31 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 88ms (ActiveRecord: 5.0ms)


  
ActiveModel::UnknownAttributeError (unknown attribute 'requested_datetime' for Reservation.):
  
app/services/reservation_service.rb:11:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:05:44 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.5ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1)) ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 2], ["table_id", 2], ["guest_party_size", 4], ["requested_date_time", "2018-01-25 16:00:00"], ["created_at", "2018-01-25 18:35:44.299103"], ["updated_at", "2018-01-25 18:35:44.299103"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 130ms (Views: 1.0ms | ActiveRecord: 8.2ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:05:55 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.7ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1,2)) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1 and id not in(1,2)) ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 2], ["table_id", 3], ["guest_party_size", 4], ["requested_date_time", "2018-01-25 16:00:00"], ["created_at", "2018-01-25 18:35:55.528677"], ["updated_at", "2018-01-25 18:35:55.528677"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 22ms (Views: 0.5ms | ActiveRecord: 8.5ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:06:15 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(1,2,3)) LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(1,2,3)) ORDER BY "tables"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 2], ["table_id", 4], ["guest_party_size", 1], ["requested_date_time", "2018-01-25 16:00:00"], ["created_at", "2018-01-25 18:36:15.131704"], ["updated_at", "2018-01-25 18:36:15.131704"]]
  [1m[35m (5.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 21ms (Views: 0.5ms | ActiveRecord: 7.8ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 00:06:25 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(1,2,3,4)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 1.1ms)


  
ReservationService::ReservationAvailabityError (ReservationService::ReservationAvailabityError):
  
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:7:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 08:50:02 +0530
  
ActionController::RoutingError (uninitialized constant ReservationsController::ExceptionHandler):
  
app/controllers/reservations_controller.rb:3:in `<class:ReservationsController>'
app/controllers/reservations_controller.rb:1:in `<top (required)>'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 08:50:47 +0530
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (undefined local variable or method `render_reservation_capacity_error' for ReservationsController:Class):
  
app/controllers/reservations_controller.rb:3:in `<class:ReservationsController>'
app/controllers/reservations_controller.rb:1:in `<top (required)>'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 08:51:15 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 16:00:00"], ["requested_date_time", "2018-01-25 17:00:00"]]
  [1m[36mTable Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(1,2,3,4)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 147ms (Views: 0.3ms | ActiveRecord: 3.9ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:21:36 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 126ms (ActiveRecord: 2.5ms)


  
NoMethodError (undefined method `validate_shift_time' for #<ReservationsController:0x007faad2d019c8>):
  
activesupport (5.1.4) lib/active_support/callbacks.rb:413:in `block in make_lambda'
activesupport (5.1.4) lib/active_support/callbacks.rb:178:in `block (2 levels) in halting_and_conditional'
actionpack (5.1.4) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
activesupport (5.1.4) lib/active_support/callbacks.rb:179:in `block in halting_and_conditional'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `block in invoke_before'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `each'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `invoke_before'
activesupport (5.1.4) lib/active_support/callbacks.rb:130:in `run_callbacks'
actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.0.3) lib/rack/etag.rb:25:in `call'
rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.3) lib/rack/head.rb:12:in `call'
activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:26:37 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 75ms (ActiveRecord: 1.8ms)


  
NoMethodError (undefined method `validate_shift_time' for #<ReservationsController:0x007faad6165b38>):
  
activesupport (5.1.4) lib/active_support/callbacks.rb:413:in `block in make_lambda'
activesupport (5.1.4) lib/active_support/callbacks.rb:178:in `block (2 levels) in halting_and_conditional'
actionpack (5.1.4) lib/abstract_controller/callbacks.rb:12:in `block (2 levels) in <module:Callbacks>'
activesupport (5.1.4) lib/active_support/callbacks.rb:179:in `block in halting_and_conditional'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `block in invoke_before'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `each'
activesupport (5.1.4) lib/active_support/callbacks.rb:507:in `invoke_before'
activesupport (5.1.4) lib/active_support/callbacks.rb:130:in `run_callbacks'
actionpack (5.1.4) lib/abstract_controller/callbacks.rb:19:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/rescue.rb:20:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
activesupport (5.1.4) lib/active_support/notifications.rb:166:in `block in instrument'
activesupport (5.1.4) lib/active_support/notifications/instrumenter.rb:21:in `instrument'
activesupport (5.1.4) lib/active_support/notifications.rb:166:in `instrument'
actionpack (5.1.4) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
actionpack (5.1.4) lib/action_controller/metal/params_wrapper.rb:252:in `process_action'
activerecord (5.1.4) lib/active_record/railties/controller_runtime.rb:22:in `process_action'
actionpack (5.1.4) lib/abstract_controller/base.rb:124:in `process'
actionpack (5.1.4) lib/action_controller/metal.rb:189:in `dispatch'
actionpack (5.1.4) lib/action_controller/metal.rb:253:in `dispatch'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:31:in `serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `each'
actionpack (5.1.4) lib/action_dispatch/journey/router.rb:33:in `serve'
actionpack (5.1.4) lib/action_dispatch/routing/route_set.rb:834:in `call'
rack (2.0.3) lib/rack/etag.rb:25:in `call'
rack (2.0.3) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.3) lib/rack/head.rb:12:in `call'
activerecord (5.1.4) lib/active_record/migration.rb:556:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:26:in `block in call'
activesupport (5.1.4) lib/active_support/callbacks.rb:97:in `run_callbacks'
actionpack (5.1.4) lib/action_dispatch/middleware/callbacks.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:59:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:27:55 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 2.1ms)


  
TypeError (no implicit conversion of nil into String):
  
app/controllers/reservations_controller.rb:53:in `parse'
app/controllers/reservations_controller.rb:53:in `parse_date'
app/controllers/reservations_controller.rb:35:in `include_between_shift_time?'
app/controllers/reservations_controller.rb:14:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:28:40 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.8ms)


  
TypeError (no implicit conversion of nil into String):
  
app/controllers/reservations_controller.rb:54:in `parse'
app/controllers/reservations_controller.rb:54:in `parse_date'
app/controllers/reservations_controller.rb:35:in `include_between_shift_time?'
app/controllers/reservations_controller.rb:14:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:29:26 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 113ms (ActiveRecord: 1.5ms)


  
NameError (undefined local variable or method `requested_date_time' for #<ReservationsController:0x007faad62810f8>):
  
app/controllers/reservations_controller.rb:35:in `include_between_shift_time?'
app/controllers/reservations_controller.rb:14:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:29:41 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 2 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 25ms (Views: 0.5ms | ActiveRecord: 2.0ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:29:47 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 1 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 3ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:29:59 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 12 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 6ms (Views: 0.3ms | ActiveRecord: 0.6ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:30:08 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 3ms (Views: 0.4ms | ActiveRecord: 0.4ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:33:31 +0530
Processing by TablesController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11.40 PM"}, "restaurant_email"=>"sobi@gmail.com", "table"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 400 Bad Request in 18ms (ActiveRecord: 1.5ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:18:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:33:57 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 4], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:03:57.630959"], ["updated_at", "2018-01-26 05:03:57.630959"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 79ms (Views: 0.5ms | ActiveRecord: 3.2ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:42:44 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 11:00:00"], ["requested_date_time", "2018-01-25 12:00:00"]]
  [1m[36mTable Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 75ms (Views: 0.2ms | ActiveRecord: 3.7ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:43:46 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 11:00:00"], ["requested_date_time", "2018-01-25 12:00:00"]]
  [1m[36mTable Exists (0.1ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 66660ms (Views: 0.5ms | ActiveRecord: 3.8ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:45:44 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 4], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:15:44.525192"], ["updated_at", "2018-01-26 05:15:44.525192"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 2.4ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:45:46 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 4], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:15:46.908972"], ["updated_at", "2018-01-26 05:15:46.908972"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 14ms (Views: 0.4ms | ActiveRecord: 7.6ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:45:51 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"6", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 6], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:15:51.606375"], ["updated_at", "2018-01-26 05:15:51.606375"]]
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 2.8ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 10:46:07 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 11:00:00"], ["requested_date_time", "2018-01-25 12:00:00"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 34702ms (Views: 0.2ms | ActiveRecord: 1.0ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 05:25:27.140391"], ["updated_at", "2018-01-26 05:25:27.140391"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (12.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 05:25:27.226581"], ["updated_at", "2018-01-26 05:25:27.226581"]]
  [1m[35m (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/tables" for 127.0.0.1 at 2018-01-26 10:56:44 +0530
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 200 OK in 66ms (Views: 0.7ms | ActiveRecord: 1.5ms)


Started POST "/tables" for 127.0.0.1 at 2018-01-26 10:56:51 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobin@gmail.com", "number"=>"4", "number_of_seats"=>"12"}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobin@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 200 OK in 5ms (Views: 0.3ms | ActiveRecord: 0.7ms)


Started POST "/tables" for 127.0.0.1 at 2018-01-26 10:57:53 +0530
Processing by TablesController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr"}, "table"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 400 Bad Request in 2ms (ActiveRecord: 0.3ms)


  
ActionController::ParameterMissing (param is missing or the value is empty: table):
  
app/controllers/tables_controller.rb:18:in `table_params'
app/controllers/tables_controller.rb:10:in `create'
Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 10:58:31 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr"}}
Completed 400 Bad Request in 0ms


  
ActionController::ParameterMissing (param is missing or the value is empty: resturant):
  
app/controllers/restaurants_controller.rb:19:in `restaurant_params'
app/controllers/restaurants_controller.rb:8:in `create'
Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 10:59:32 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 140ms (ActiveRecord: 1.7ms)


  
NameError (undefined local variable or method `restaurants' for #<RestaurantsController:0x007ffa3157b678>
Did you mean?  restaurant):
  
app/controllers/restaurants_controller.rb:12:in `create'
Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:00:16 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 15ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:00:41 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr"}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 16ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:01:16 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr", "phone_number"=>8867231414}}
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Malabr"], ["email", "sobi@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-26 05:31:16.252912"], ["updated_at", "2018-01-26 05:31:16.252912"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 8ms (Views: 0.6ms | ActiveRecord: 2.4ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:01:31 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Malabr", "phone_number"=>8867231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:01:42 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"Kairali", "phone_number"=>8867231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:01:48 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobisunny@gmail.com", "name"=>"Kairali", "phone_number"=>8867231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Kairali"], ["email", "sobisunny@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-26 05:31:48.200901"], ["updated_at", "2018-01-26 05:31:48.200901"]]
  [1m[35m (6.5ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 13ms (Views: 0.7ms | ActiveRecord: 7.4ms)


Started GET "/restaurants" for 127.0.0.1 at 2018-01-26 11:02:29 +0530
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
Completed 200 OK in 47ms (Views: 46.0ms | ActiveRecord: 0.3ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:02:44 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"6", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 6], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:32:44.747382"], ["updated_at", "2018-01-26 05:32:44.747382"]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 16ms (Views: 0.6ms | ActiveRecord: 3.3ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:02:52 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 2], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:32:52.783927"], ["updated_at", "2018-01-26 05:32:52.783927"]]
  [1m[35m (6.0ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 14ms (Views: 0.5ms | ActiveRecord: 7.1ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:03:18 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 11:00:00"], ["requested_date_time", "2018-01-25 12:00:00"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 74ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:03:55 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 3ms (Views: 0.1ms | ActiveRecord: 0.4ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:04:54 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 58ms (Views: 0.2ms | ActiveRecord: 2.2ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:05:02 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 43ms (Views: 0.2ms | ActiveRecord: 2.2ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:06:09 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 46ms (Views: 0.2ms | ActiveRecord: 1.9ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:06:43 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 47ms (Views: 0.2ms | ActiveRecord: 3.4ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:07:00 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 22ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:07:38 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 22ms (Views: 0.2ms | ActiveRecord: 2.0ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:08:20 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 22ms (Views: 0.5ms | ActiveRecord: 1.8ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:08:26 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 3 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 15953ms (Views: 0.4ms | ActiveRecord: 2.1ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:08:53 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 3378ms (Views: 0.3ms | ActiveRecord: 2.1ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:09:24 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mCACHE Table Load (0.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1 and id not in(NULL))[0m
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE "tables"."restaurant_id" = ?[0m  [["restaurant_id", 1]]
Completed 422 Unprocessable Entity in 162060ms (Views: 0.2ms | ActiveRecord: 5.0ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:12:11 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mCACHE Table Load (0.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1 and id not in(NULL))[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1)[0m
  [1m[36mTable Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1 and id not in(NULL)) LIMIT ?[0m  [["LIMIT", 1]]
Completed 422 Unprocessable Entity in 82144ms (Views: 0.3ms | ActiveRecord: 3.9ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:13:35 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
Completed 500 Internal Server Error in 61ms (ActiveRecord: 2.9ms)


  
ActiveRecord::PreparedStatementInvalid (wrong number of bind variables (2 for 3) in: number_of_seats >= ? and restaurant_id = ? and id not in(?)):
  
app/services/reservation_service.rb:23:in `available_tables'
app/services/reservation_service.rb:9:in `create_reservation'
app/controllers/reservations_controller.rb:15:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:14:27 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1)[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "guests" ("email", "name", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["email", "sobisunny@gmail.com"], ["name", "sobin"], ["created_at", "2018-01-26 05:44:28.149093"], ["updated_at", "2018-01-26 05:44:28.149093"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 1], ["guest_party_size", 2], ["requested_date_time", "2018-01-25 20:00:00"], ["created_at", "2018-01-26 05:44:28.165727"], ["updated_at", "2018-01-26 05:44:28.165727"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 105ms (Views: 0.5ms | ActiveRecord: 9.2ms)


  [1m[36mTable Load (45.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" ORDER BY "tables"."number_of_seats" DESC[0m
Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:19:06 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"12"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 2], ["number_of_seats", 12], ["restaurant_id", 1], ["created_at", "2018-01-26 05:49:06.844039"], ["updated_at", "2018-01-26 05:49:06.844039"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 40ms (Views: 0.5ms | ActiveRecord: 4.0ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:19:18 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"2"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["number", 2], ["number_of_seats", 2], ["restaurant_id", 1], ["created_at", "2018-01-26 05:49:18.538439"], ["updated_at", "2018-01-26 05:49:18.538439"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 7ms (Views: 0.5ms | ActiveRecord: 2.3ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:19:23 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"1"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "tables" ("number", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["number", 2], ["restaurant_id", 1], ["created_at", "2018-01-26 05:49:23.026704"], ["updated_at", "2018-01-26 05:49:23.026704"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 3.8ms)


  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" ORDER BY "tables"."number_of_seats" DESC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" ORDER BY "tables"."number_of_seats" ASC[0m
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:20:31 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 4], ["guest_party_size", 2], ["requested_date_time", "2018-01-25 20:00:00"], ["created_at", "2018-01-26 05:50:31.383842"], ["updated_at", "2018-01-26 05:50:31.383842"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 87ms (Views: 0.4ms | ActiveRecord: 7.1ms)


  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:21:06 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 5], ["guest_party_size", 1], ["requested_date_time", "2018-01-25 20:00:00"], ["created_at", "2018-01-26 05:51:06.542565"], ["updated_at", "2018-01-26 05:51:06.542565"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 15ms (Views: 0.4ms | ActiveRecord: 3.1ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 11:21:30 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>7, "requested_date_time"=>"25-1-2018 8 PM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 7 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-25 20:00:00"], ["requested_date_time", "2018-01-25 21:00:00"]]
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 2], ["guest_party_size", 7], ["requested_date_time", "2018-01-25 20:00:00"], ["created_at", "2018-01-26 05:51:30.025588"], ["updated_at", "2018-01-26 05:51:30.025588"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 13ms (Views: 0.5ms | ActiveRecord: 3.0ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 11:59:39 +0530
  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/models/restaurant.rb:7: syntax error, unexpected tIDENTIFIER, expecting keyword_end
tes :phone_number numericality: true,
                              ^
/Users/sobin/Documents/my_projects/restaurant_reservation/app/models/restaurant.rb:7: Can't assign to true
one_number numericality: true,
                              ^):
  
app/models/restaurant.rb:7: syntax error, unexpected tIDENTIFIER, expecting keyword_end
app/models/restaurant.rb:7: Can't assign to true
Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 12:00:08 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobisunny@gmail.com", "name"=>"Kairali", "phone_number"=>87231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 16ms (Views: 0.2ms | ActiveRecord: 2.1ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 12:00:15 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sunny@gmail.com", "name"=>"Kairali", "phone_number"=>87231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (Views: 0.2ms | ActiveRecord: 0.4ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 12:01:28 +0530
  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/models/restaurant.rb:8: syntax error, unexpected tSTRING_DEND, expecting keyword_end
e: ' Invalid Phone number!'} }
                              ^):
  
app/models/restaurant.rb:8: syntax error, unexpected tSTRING_DEND, expecting keyword_end
Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 12:01:39 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sunny@gmail.com", "name"=>"Kairali", "phone_number"=>87231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 21ms (Views: 0.2ms | ActiveRecord: 3.1ms)


  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" ORDER BY "reservations"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Started POST "/reservations/1" for 127.0.0.1 at 2018-01-26 12:26:10 +0530
  
ActionController::RoutingError (No route matches [POST] "/reservations/1"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:26:22 +0530
  
ActionController::RoutingError (No route matches [PATCH] "/reservations/1"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started PUT "/reservations/1" for 127.0.0.1 at 2018-01-26 12:26:29 +0530
  
ActionController::RoutingError (No route matches [PUT] "/reservations/1"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.1) lib/puma/configuration.rb:225:in `call'
puma (3.11.1) lib/puma/server.rb:624:in `handle_request'
puma (3.11.1) lib/puma/server.rb:438:in `process_client'
puma (3.11.1) lib/puma/server.rb:302:in `block in run'
puma (3.11.1) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:27:47 +0530
  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/controllers/reservations_controller.rb:40: syntax error, unexpected tCONSTANT, expecting keyword_end
	  	@reservation Reservation.find(params[:id])
	  	                        ^):
  
app/controllers/reservations_controller.rb:40: syntax error, unexpected tCONSTANT, expecting keyword_end
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:28:56 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2018 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.4ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.7ms)


  
ArgumentError (wrong number of arguments (given 1, expected 0)):
  
app/services/reservation_service.rb:13:in `update_reservation'
app/controllers/reservations_controller.rb:26:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:30:11 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2018 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (38.8ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 102ms (ActiveRecord: 40.2ms)


  
NoMethodError (undefined method `restaurant' for #<Reservation:0x007ffa30405628>
Did you mean?  resturant):
  
app/services/reservation_service.rb:14:in `update_reservation'
app/controllers/reservations_controller.rb:26:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:31:01 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2018 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (6.5ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.5ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.6ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-28 20:00:00"], ["requested_date_time", "2018-01-28 21:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "requested_date_time" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 4], ["requested_date_time", "2018-01-28 20:00:00"], ["updated_at", "2018-01-26 07:01:02.141357"], ["id", 1]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 97ms (Views: 0.2ms | ActiveRecord: 14.0ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:32:15 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2018 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (15.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-28 20:00:00"], ["requested_date_time", "2018-01-28 21:00:00"]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (9.6ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 142ms (Views: 0.4ms | ActiveRecord: 29.0ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:32:25 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2019-01-28 20:00:00"], ["requested_date_time", "2019-01-28 21:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "reservations" SET "requested_date_time" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["requested_date_time", "2019-01-28 20:00:00"], ["updated_at", "2018-01-26 07:02:25.272216"], ["id", 1]]
  [1m[35m (5.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 17ms (Views: 0.5ms | ActiveRecord: 7.2ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:35:50 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2011 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2011-01-28 20:00:00"], ["requested_date_time", "2011-01-28 21:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (12.4ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "requested_date_time" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["requested_date_time", "2011-01-28 20:00:00"], ["updated_at", "2018-01-26 07:05:50.896996"], ["id", 1]]
  [1m[35m (1.9ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 101ms (Views: 0.5ms | ActiveRecord: 19.2ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:36:13 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2011 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2011-01-28 20:00:00"], ["requested_date_time", "2011-01-28 21:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (11.6ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 95ms (Views: 0.5ms | ActiveRecord: 16.4ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 12:38:44 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2011 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.5ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 16ms (Views: 0.2ms | ActiveRecord: 1.7ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 13:09:23 +0530
  [1m[35m (23.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"25-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 74ms (Views: 0.3ms | ActiveRecord: 1.4ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 13:09:44 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>2, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 2 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (12.0ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 4], ["guest_party_size", 2], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-26 07:39:44.316996"], ["updated_at", "2018-01-26 07:39:44.316996"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 180ms (Views: 0.5ms | ActiveRecord: 18.2ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 13:14:13 +0530
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 1], ["guest_party_size", 4], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-26 07:44:14.530082"], ["updated_at", "2018-01-26 07:44:14.530082"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 103ms (Views: 0.7ms | ActiveRecord: 5.6ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 13:24:48 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 2], ["guest_party_size", 4], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-26 07:54:48.413564"], ["updated_at", "2018-01-26 07:54:48.413564"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 113ms (Views: 0.5ms | ActiveRecord: 6.4ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 14:17:52 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.6ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (8.7ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 3], ["guest_party_size", 4], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-26 08:47:52.516566"], ["updated_at", "2018-01-26 08:47:52.516566"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
Completed 500 Internal Server Error in 216ms (ActiveRecord: 19.9ms)


  
NoMethodError (undefined method `resturant' for #<Reservation:0x007f8465cafdf0>):
  
app/services/notification_mail_service.rb:23:in `compose_guest_email'
app/services/notification_mail_service.rb:5:in `send_confirmation_mail'
app/models/reservation.rb:9:in `send_create_notification_mailer'
app/services/reservation_service.rb:11:in `create_reservation'
app/controllers/reservations_controller.rb:14:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 14:20:27 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>4, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.7ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
Completed 422 Unprocessable Entity in 126ms (Views: 0.5ms | ActiveRecord: 6.9ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 14:20:34 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.6ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = ? LIMIT ?[0m  [["email", "sobisunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.9ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["guest_id", 1], ["table_id", 5], ["guest_party_size", 1], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-26 08:50:34.268040"], ["updated_at", "2018-01-26 08:50:34.268040"]]
  [1m[35m (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mRestaurant Load (0.7ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 200 OK in 2346ms (Views: 1.0ms | ActiveRecord: 7.8ms)


  [1m[36mReservation Load (0.6ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" ORDER BY "reservations"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mRestaurant Load (21.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" ORDER BY "restaurants"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mReservation Load (0.8ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "tables" ON "reservations"."table_id" = "tables"."id" WHERE "tables"."restaurant_id" = ?[0m  [["restaurant_id", 1]]
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" ORDER BY "reservations"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (7.0ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 09:51:46.347508"], ["id", 9]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" ORDER BY "reservations"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (1.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 3], ["updated_at", "2018-01-26 09:56:32.419378"], ["id", 9]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 15:39:09 +0530
  
SyntaxError (/Users/sobin/Documents/my_projects/restaurant_reservation/app/models/reservation.rb:23: syntax error, unexpected keyword_end
  end
     ^):
  
app/models/reservation.rb:23: syntax error, unexpected keyword_end
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 15:39:41 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>1, "requested_date_time"=>"28-1-2011 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 73ms (Views: 0.3ms | ActiveRecord: 1.5ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 15:39:44 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>1, "requested_date_time"=>"28-1-2011 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
Completed 422 Unprocessable Entity in 2ms (Views: 0.2ms | ActiveRecord: 0.2ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 15:39:53 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>1, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (15.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 4 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2019-01-28 20:00:00"], ["requested_date_time", "2019-01-28 21:00:00"]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "requested_date_time" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 1], ["requested_date_time", "2019-01-28 20:00:00"], ["updated_at", "2018-01-26 10:09:53.866393"], ["id", 1]]
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `changes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `changed` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.keys` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from send_update_confiramtion_mail at (pry):2)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from send_update_confiramtion_mail at (pry):4)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from send_update_confiramtion_mail at (pry):4)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from send_update_confiramtion_mail at (pry):4)
  [1m[35m (63.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 2080120ms (Views: 0.7ms | ActiveRecord: 82.2ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:14:41 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>1, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 54ms (ActiveRecord: 3.8ms)


  
NoMethodError (undefined method `first' for nil:NilClass):
  
app/services/notification_mail_service.rb:22:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:15:10 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>1, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at (pry):7)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):7)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at (pry):9)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):9)
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:15:38 +0530
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 37306ms (ActiveRecord: 3.7ms)


  
NoMethodError (undefined method `first' for nil:NilClass):
  
app/services/notification_mail_service.rb:23:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>2, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 10:45:47.580163"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at (pry):11)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):11)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at (pry):11)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):13)
DEPRECATION WARNING: The behavior of `attribute_was` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `attribute_before_last_save` instead. (called from compose_guest_update_email at (pry):14)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):14)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at (pry):14)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:25)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:25)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 92707ms (ActiveRecord: 4.3ms)


  
NoMethodError (undefined method `first' for nil:NilClass):
  
app/services/notification_mail_service.rb:25:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:17:24 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>2, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.3ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.2ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 10:47:24.180164"], ["id", 1]]
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 112ms (ActiveRecord: 4.8ms)


  
NoMethodError (undefined method `guest_party_size_changed_was' for #<Reservation:0x007f8465365ab0>
Did you mean?  guest_party_size_change
               guest_party_size_changed?):
  
app/services/notification_mail_service.rb:22:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:20:03 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>2, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 10:50:03.357427"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
  [1m[35m (0.5ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 87ms (ActiveRecord: 4.1ms)


  
NoMethodError (undefined method `guest_party_size_changed_was' for #<Reservation:0x007f8468112bc0>
Did you mean?  guest_party_size_change
               guest_party_size_changed?):
  
app/services/notification_mail_service.rb:22:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:20:50 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>2, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.1ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 10:50:51.046382"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):15)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at (pry):18)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):18)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at (pry):18)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at (pry):19)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at (pry):19)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at (pry):19)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
  [1m[35m (0.3ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 74057ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `guest_party_size_changed_was' for #<Reservation:0x007f84661a78d0>
Did you mean?  guest_party_size_change
               guest_party_size_changed?):
  
app/services/notification_mail_service.rb:23:in `compose_guest_update_email'
app/services/notification_mail_service.rb:11:in `send_update_confiramtion_mail'
app/models/reservation.rb:12:in `send_update_notification_mailer'
app/services/reservation_service.rb:16:in `update_reservation'
app/controllers/reservations_controller.rb:24:in `update'
Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:22:07 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>2, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 2], ["updated_at", "2018-01-26 10:52:07.599971"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:23)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:25)
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:35)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:35)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:35)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:35)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:37)
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 9891ms (Views: 0.5ms | ActiveRecord: 5.9ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:29:17 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>4, "requested_date_time"=>"28-1-2019 8 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.2ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 4], ["updated_at", "2018-01-26 10:59:17.400423"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:24)
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:36)
  [1m[35m (1.8ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 2605ms (Views: 0.5ms | ActiveRecord: 5.4ms)


Started PATCH "/reservations/1" for 127.0.0.1 at 2018-01-26 16:30:27 +0530
Processing by ReservationsController#update as */*
  Parameters: {"reservation"=>{"guest_party_size"=>3, "requested_date_time"=>"28-1-2019 1 PM"}, "id"=>"1"}
  [1m[36mReservation Load (0.2ms)[0m  [1m[34mSELECT  "reservations".* FROM "reservations" WHERE "reservations"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTable Load (0.1ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mGuest Load (0.1ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35mSQL (0.3ms)[0m  [1m[33mUPDATE "reservations" SET "guest_party_size" = ?, "requested_date_time" = ?, "updated_at" = ? WHERE "reservations"."id" = ?[0m  [["guest_party_size", 3], ["requested_date_time", "2019-01-28 13:00:00"], ["updated_at", "2018-01-26 11:00:27.790579"], ["id", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:22)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:24)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:24)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:24)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_guest_update_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:24)
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:34)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:36)
DEPRECATION WARNING: The behavior of `attribute_change` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:36)
DEPRECATION WARNING: The behavior of `attribute_changed?` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_change_to_attribute?` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:36)
DEPRECATION WARNING: The behavior of `changed_attributes` inside of after callbacks will be changing in the next version of Rails. The new return value will reflect the behavior of calling the method after `save` returned (e.g. the opposite of what it returns now). To maintain the current behavior, use `saved_changes.transform_values(&:first)` instead. (called from compose_update_restaurant_email at /Users/sobin/Documents/my_projects/restaurant_reservation/app/services/notification_mail_service.rb:36)
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 3033ms (Views: 0.5ms | ActiveRecord: 2.6ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 16:53:39 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobisunny@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (13.8ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (0.3ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN ? AND ?) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
Completed 422 Unprocessable Entity in 77ms (Views: 0.2ms | ActiveRecord: 16.4ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 16:55:05 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sunny@gmail.com", "name"=>"Kairali", "phone_number"=>87231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sunny@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 500 Internal Server Error in 93ms (Views: 0.3ms | ActiveRecord: 0.4ms)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (39.4ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGuests (20180125110326)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110326"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateRestaurants (20180125110835)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110835"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateReservations (20180125120543)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_a00daaa2d3"
FOREIGN KEY ("guest_id")
  REFERENCES "guests" ("id")
, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125120543"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTables (20180125122518)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125122518"]]
  [1m[35m (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:16:45.777537"], ["updated_at", "2018-01-26 12:16:45.777537"]]
  [1m[35m (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (34.9ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (45.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (24.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (8.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (6.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:20:33.236368"], ["updated_at", "2018-01-26 12:20:33.236368"]]
  [1m[35m (1.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (20.7ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (40.4ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (51.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:20:33.389320"], ["updated_at", "2018-01-26 12:20:33.389320"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (16.0ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (12.1ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:21:00.404621"], ["updated_at", "2018-01-26 12:21:00.404621"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (10.6ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (12.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (59.6ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (18.6ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (80.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (9.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:21:00.649177"], ["updated_at", "2018-01-26 12:21:00.649177"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGuests (20180125110326)
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110326"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateRestaurants (20180125110835)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125110835"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateReservations (20180125120543)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL, CONSTRAINT "fk_rails_a00daaa2d3"
FOREIGN KEY ("guest_id")
  REFERENCES "guests" ("id")
, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35mSQL (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125120543"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to CreateTables (20180125122518)
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20180125122518"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:29:54.193550"], ["updated_at", "2018-01-26 12:29:54.193550"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_table_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_table_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_tables_on_restaurant_id' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (10.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:56:49.600943"], ["updated_at", "2018-01-26 12:56:49.600943"]]
  [1m[35m (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-26 12:56:49.633211"], ["updated_at", "2018-01-26 12:56:49.633211"]]
  [1m[35m (1.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (16.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (2.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (1.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests"[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT sqlite_version(*)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "guests" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar NOT NULL, "name" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations"[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" datetime NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_guest_id" ON "reservations" ("guest_id")[0m
  [1m[35m (0.4ms)[0m  [1m[34m            SELECT sql
            FROM sqlite_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_reservations_on_guest_id' AND type='index'
[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX "index_reservations_on_table_id" ON "reservations" ("table_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants"[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar NOT NULL, "email" varchar NOT NULL, "phone_number" varchar NOT NULL, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables"[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "tables" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX "index_tables_on_restaurant_id" ON "tables" ("restaurant_id")[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/resturants" for 127.0.0.1 at 2018-01-26 18:29:26 +0530
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/resturants"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.2) lib/puma/configuration.rb:225:in `call'
puma (3.11.2) lib/puma/server.rb:624:in `handle_request'
puma (3.11.2) lib/puma/server.rb:438:in `process_client'
puma (3.11.2) lib/puma/server.rb:302:in `block in run'
puma (3.11.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/restaurants" for 127.0.0.1 at 2018-01-26 18:29:33 +0530
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (0.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 1.6ms)


Started GET "/favicon.ico" for 127.0.0.1 at 2018-01-26 18:29:46 +0530
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.2) lib/puma/configuration.rb:225:in `call'
puma (3.11.2) lib/puma/server.rb:624:in `handle_request'
puma (3.11.2) lib/puma/server.rb:438:in `process_client'
puma (3.11.2) lib/puma/server.rb:302:in `block in run'
puma (3.11.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/favicon.ico" for 127.0.0.1 at 2018-01-26 18:29:46 +0530
  
ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  
actionpack (5.1.4) lib/action_dispatch/middleware/debug_exceptions.rb:63:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
railties (5.1.4) lib/rails/rack/logger.rb:36:in `call_app'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `block in call'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `block in tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:26:in `tagged'
activesupport (5.1.4) lib/active_support/tagged_logging.rb:69:in `tagged'
railties (5.1.4) lib/rails/rack/logger.rb:24:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/request_id.rb:25:in `call'
rack (2.0.3) lib/rack/runtime.rb:22:in `call'
activesupport (5.1.4) lib/active_support/cache/strategy/local_cache_middleware.rb:27:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/executor.rb:12:in `call'
actionpack (5.1.4) lib/action_dispatch/middleware/static.rb:125:in `call'
rack (2.0.3) lib/rack/sendfile.rb:111:in `call'
railties (5.1.4) lib/rails/engine.rb:522:in `call'
puma (3.11.2) lib/puma/configuration.rb:225:in `call'
puma (3.11.2) lib/puma/server.rb:624:in `handle_request'
puma (3.11.2) lib/puma/server.rb:438:in `process_client'
puma (3.11.2) lib/puma/server.rb:302:in `block in run'
puma (3.11.2) lib/puma/thread_pool.rb:120:in `block in spawn_thread'
Started GET "/restaurants" for 127.0.0.1 at 2018-01-26 18:29:56 +0530
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.4ms)


Started GET "/restaurants" for 127.0.0.1 at 2018-01-26 18:40:22 +0530
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by RestaurantsController#index as */*
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (0.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants"[0m
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.7ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 18:40:38 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sunny@gmail.com", "name"=>"Kairali", "phone_number"=>8867231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.3ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sunny@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "Kairali"], ["email", "sunny@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-26 13:10:38.252107"], ["updated_at", "2018-01-26 13:10:38.252107"]]
  [1m[35m (1.4ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 65ms (Views: 0.6ms | ActiveRecord: 3.1ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 18:41:17 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"1"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[31mrollback transaction[0m
Completed 200 OK in 93ms (Views: 0.5ms | ActiveRecord: 1.2ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-26 18:41:51 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"new star", "phone_number"=>8867231414}}
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mRestaurant Exists (0.2ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.4ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?)[0m  [["name", "new star"], ["email", "sobi@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-26 13:11:51.565318"], ["updated_at", "2018-01-26 13:11:51.565318"]]
  [1m[35m (5.8ms)[0m  [1m[36mcommit transaction[0m
Completed 201 Created in 11ms (Views: 0.5ms | ActiveRecord: 6.5ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-26 18:41:58 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"1"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = ? LIMIT ?[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "tables" ("number", "restaurant_id", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["number", 2], ["restaurant_id", 2], ["created_at", "2018-01-26 13:11:58.132760"], ["updated_at", "2018-01-26 13:11:58.132760"]]
  [1m[35m (1.5ms)[0m  [1m[36mcommit transaction[0m
Completed 200 OK in 35ms (Views: 0.5ms | ActiveRecord: 2.3ms)


  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ?[0m  [["key", "environment"]]
  [1m[36mTable Load (1.1ms)[0m  [1m[34mSELECT "tables".* FROM "tables"[0m
  [1m[35m (167.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "reservation_development_db"[0m
  [1m[35m (152.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "reservation_test_db"[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests" CASCADE[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "guests" ("id" bigserial primary key, "email" character varying NOT NULL, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" timestamp NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_guest_id" ON "reservations"  ("guest_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_table_id" ON "reservations"  ("table_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone_number" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables" CASCADE[0m
  [1m[35m (7.7ms)[0m  [1m[35mCREATE TABLE "tables" ("id" bigserial primary key, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_tables_on_restaurant_id" ON "tables"  ("restaurant_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (31.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (45.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-27 02:29:12.097683"], ["updated_at", "2018-01-27 02:29:12.097683"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "guests" CASCADE[0m
  [1m[35m (9.3ms)[0m  [1m[35mCREATE TABLE "guests" ("id" bigserial primary key, "email" character varying NOT NULL, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "reservations" CASCADE[0m
  [1m[35m (5.2ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "guest_id" integer NOT NULL, "table_id" integer NOT NULL, "guest_party_size" integer, "requested_date_time" timestamp NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_guest_id" ON "reservations"  ("guest_id")[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_table_id" ON "reservations"  ("table_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "restaurants" CASCADE[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone_number" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "tables" CASCADE[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE TABLE "tables" ("id" bigserial primary key, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_tables_on_restaurant_id" ON "tables"  ("restaurant_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20180125122518)[0m
  [1m[35m (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20180125110326),
(20180125110835),
(20180125120543);

[0m
  [1m[35m (5.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-27 02:29:12.249731"], ["updated_at", "2018-01-27 02:29:12.249731"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (194.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "reservation_development_db"[0m
  [1m[35m (191.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "reservation_test_db"[0m
  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT pg_try_advisory_lock(8588892164472695985)[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateGuests (20180125110326)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (46.7ms)[0m  [1m[35mCREATE TABLE "guests" ("id" bigserial primary key, "email" character varying NOT NULL, "name" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180125110326"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRestaurants (20180125110835)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "phone_number" character varying NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180125110835"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateTables (20180125120543)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "tables" ("id" bigserial primary key, "number" integer NOT NULL, "number_of_seats" integer DEFAULT 1, "restaurant_id" bigint, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_tables_on_restaurant_id" ON "tables"  ("restaurant_id")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180125120543"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateReservations (20180125122518)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (43.1ms)[0m  [1m[35mCREATE TABLE "reservations" ("id" bigserial primary key, "guest_id" bigint NOT NULL, "table_id" bigint NOT NULL, "guest_party_size" integer, "requested_date_time" timestamp NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "fk_rails_a00daaa2d3"
FOREIGN KEY ("guest_id")
  REFERENCES "guests" ("id")
, CONSTRAINT "fk_rails_23ce71128d"
FOREIGN KEY ("table_id")
  REFERENCES "tables" ("id")
)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_guest_id" ON "reservations"  ("guest_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_reservations_on_table_id" ON "reservations"  ("table_id")[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20180125122518"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2018-01-27 02:33:36.116552"], ["updated_at", "2018-01-27 02:33:36.116552"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(8588892164472695985)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:15:03 +0530
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ReservationsController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "reservation"=>{}}
  [1m[36mRestaurant Load (0.9ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Completed 500 Internal Server Error in 38ms (ActiveRecord: 7.6ms)


  
NoMethodError (undefined method `reservations' for nil:NilClass):
  
app/controllers/reservations_controller.rb:7:in `index'
Started POST "/restaurants" for 127.0.0.1 at 2018-01-27 08:15:41 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobi@gmail.com", "name"=>"new star", "phone_number"=>8867231414}}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Exists (1.9ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "new star"], ["email", "sobi@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-27 02:45:41.170509"], ["updated_at", "2018-01-27 02:45:41.170509"]]
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Restaurant (0.57ms)
Completed 201 Created in 121ms (Views: 27.0ms | ActiveRecord: 58.9ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-27 08:15:57 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobin@gmail.com", "name"=>"kairali", "phone_number"=>8867231414}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobin@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (0.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "email", "phone_number", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "kairali"], ["email", "sobin@gmail.com"], ["phone_number", "8867231414"], ["created_at", "2018-01-27 02:45:57.179569"], ["updated_at", "2018-01-27 02:45:57.179569"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Restaurant (0.32ms)
Completed 201 Created in 9ms (Views: 1.0ms | ActiveRecord: 1.8ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:16:13 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"2", "number_of_seats"=>"1"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.2ms)[0m  [1m[32mINSERT INTO "tables" ("number", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["number", 2], ["restaurant_id", 1], ["created_at", "2018-01-27 02:46:13.610628"], ["updated_at", "2018-01-27 02:46:13.610628"]]
  [1m[35m (40.9ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Table (0.38ms)
Completed 200 OK in 102ms (Views: 2.4ms | ActiveRecord: 50.2ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:16:27 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"6", "number_of_seats"=>"6"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.1ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["number", 6], ["number_of_seats", 6], ["restaurant_id", 1], ["created_at", "2018-01-27 02:46:27.628455"], ["updated_at", "2018-01-27 02:46:27.628455"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Table (0.25ms)
Completed 200 OK in 7ms (Views: 0.8ms | ActiveRecord: 3.0ms)


Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:17:26 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobi@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (41.6ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN $1 AND $2) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (0.8ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mGuest Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "guests" WHERE "guests"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "guests" ("email", "name", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["email", "sobi@gmail.com"], ["name", "sobin"], ["created_at", "2018-01-27 02:47:26.749520"], ["updated_at", "2018-01-27 02:47:26.749520"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (71.2ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["guest_id", 1], ["table_id", 1], ["guest_party_size", 1], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-27 02:47:26.763920"], ["updated_at", "2018-01-27 02:47:26.763920"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ReservationSerializer with ActiveModelSerializers::Adapter::Attributes (3.08ms)
Completed 500 Internal Server Error in 2519ms (ActiveRecord: 126.9ms)


  
NoMethodError (undefined method `strftime' for 1:Integer):
  
app/serializers/reservation_serializer.rb:13:in `guest_party_size'
app/controllers/reservations_controller.rb:23:in `create'
Started POST "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:18:04 +0530
Processing by ReservationsController#create as */*
  Parameters: {"reservation"=>{"guest_email"=>"sobi@gmail.com", "guest_name"=>"sobin", "guest_party_size"=>1, "requested_date_time"=>"30-1-2018 11 AM"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mTable Load (1.0ms)[0m  [1m[34mSELECT "tables".* FROM "tables" WHERE (number_of_seats >= 1 and restaurant_id = 1) ORDER BY "tables"."number_of_seats" ASC[0m
  [1m[36mTable Load (15.9ms)[0m  [1m[34mSELECT "tables".* FROM "tables" INNER JOIN "reservations" ON "reservations"."table_id" = "tables"."id" WHERE ("reservations"."requested_date_time" BETWEEN $1 AND $2) AND "tables"."restaurant_id" = 1[0m  [["requested_date_time", "2018-01-30 11:00:00"], ["requested_date_time", "2018-01-30 12:00:00"]]
  [1m[36mGuest Load (0.7ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (1.3ms)[0m  [1m[32mINSERT INTO "reservations" ("guest_id", "table_id", "guest_party_size", "requested_date_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["guest_id", 1], ["table_id", 2], ["guest_party_size", 1], ["requested_date_time", "2018-01-30 11:00:00"], ["created_at", "2018-01-27 02:48:04.380546"], ["updated_at", "2018-01-27 02:48:04.380546"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers] Rendered ReservationSerializer with ActiveModelSerializers::Adapter::Attributes (20.37ms)
Completed 200 OK in 2031ms (Views: 22.2ms | ActiveRecord: 43.4ms)


Started GET "/reservations?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:18:24 +0530
Processing by ReservationsController#index as */*
  Parameters: {"restaurant_email"=>"sobi@gmail.com", "reservation"=>{}}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
  [1m[36mReservation Load (0.6ms)[0m  [1m[34mSELECT "reservations".* FROM "reservations" INNER JOIN "tables" ON "reservations"."table_id" = "tables"."id" WHERE "tables"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
[active_model_serializers]   [1m[36mGuest Load (0.3ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mTable Load (0.5ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mCACHE Guest Load (0.0ms)[0m  [1m[34mSELECT  "guests".* FROM "guests" WHERE "guests"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[active_model_serializers]   [1m[36mTable Load (0.4ms)[0m  [1m[34mSELECT  "tables".* FROM "tables" WHERE "tables"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
[active_model_serializers] Rendered ActiveModel::Serializer::CollectionSerializer with ActiveModelSerializers::Adapter::Attributes (8.37ms)
Completed 200 OK in 82ms (Views: 11.3ms | ActiveRecord: 2.3ms)


Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:23:36 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"5", "number_of_seats"=>"5"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["number", 5], ["number_of_seats", 5], ["restaurant_id", 1], ["created_at", "2018-01-27 02:53:36.205910"], ["updated_at", "2018-01-27 02:53:36.205910"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered TableSerializer with ActiveModelSerializers::Adapter::Attributes (0.27ms)
Completed 500 Internal Server Error in 123ms (ActiveRecord: 13.4ms)


  
TypeError (no implicit conversion of Integer into String):
  
app/serializers/table_serializer.rb:6:in `+'
app/serializers/table_serializer.rb:6:in `number'
app/controllers/tables_controller.rb:12:in `create'
Started POST "/tables?restaurant_email=sobi@gmail.com" for 127.0.0.1 at 2018-01-27 08:23:53 +0530
Processing by TablesController#create as */*
  Parameters: {"table"=>{"restaurant_email"=>"sobi@gmail.com", "number"=>"5", "number_of_seats"=>"5"}, "restaurant_email"=>"sobi@gmail.com"}
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobi@gmail.com"], ["LIMIT", 1]]
Unpermitted parameter: :restaurant_email
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35mSQL (0.5ms)[0m  [1m[32mINSERT INTO "tables" ("number", "number_of_seats", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["number", 5], ["number_of_seats", 5], ["restaurant_id", 1], ["created_at", "2018-01-27 02:53:53.134460"], ["updated_at", "2018-01-27 02:53:53.134460"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
[active_model_serializers] Rendered TableSerializer with ActiveModelSerializers::Adapter::Attributes (33.94ms)
Completed 200 OK in 67ms (Views: 35.8ms | ActiveRecord: 1.6ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-27 08:32:07 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobin@l.com", "name"=>"kairali", "phone_number"=>88631414}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobin@l.com"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.18ms)
Completed 500 Internal Server Error in 106ms (Views: 3.9ms | ActiveRecord: 0.9ms)


Started POST "/restaurants" for 127.0.0.1 at 2018-01-27 08:32:25 +0530
Processing by RestaurantsController#create as */*
  Parameters: {"restaurant"=>{"email"=>"sobin.com", "name"=>"kairali", "phone_number"=>8867231414}}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Exists (0.4ms)[0m  [1m[34mSELECT  1 AS one FROM "restaurants" WHERE "restaurants"."email" = $1 LIMIT $2[0m  [["email", "sobin.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
[active_model_serializers] Rendered ActiveModel::Serializer::Null with Hash (0.09ms)
Completed 500 Internal Server Error in 4ms (Views: 0.6ms | ActiveRecord: 0.8ms)


